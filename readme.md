# VOICEVOX 音声一括生成スクリプト
`voice.json` に定義されたテキスト一覧をもとに、VOICEVOX API (tts.quest) を利用して音声ファイル（.wav）を一括で生成するPythonスクリプトです。
## 主な仕様
- 設定の外部化: APIキーと話者IDを`define.json` から読み込みます。
- 一括処理: `voice.json` に記載された複数のテキストを順番に処理します。
- 差分生成（重複確認）:
  - 出力先に同名の`.wav`ファイルが既に存在する場合、ターミナルで再生成するかをユーザーに確認します。
  - APIポイントの無駄遣いを防ぐことができます。（`y`以外を入力するとスキップされます）
- ポイント確認: 実行開始時に、現在の残りAPIポイント数をコンソールに表示します。
- フォルダ自動生成: 出力先フォルダ`exports`が存在しない場合、自動的に作成します。

## 大まかな仕組み
1. `define.json`からAPIキーと話者IDを読み込みます。
2. `export`フォルダが存在するか確認し、なければ作成します。
3. APIキーを使って、現在の残りAPIポイント数を照会・表示します。
4. `voice.json`を読み込み、処理対象の音声リストを取得します。
5. リストの各項目について、以下の処理をループ実行します。
   1. export フォルダ内に同名の`.wav`ファイルが存在するかチェックします。
   2. 存在する場合、ターミナルで再生成（上書き）するかをユーザーに問いかけます。
   3. （再生成する、またはファイルが存在しない場合）APIにリクエストを送信し、音声データを取得します。
   4. 取得した音声データを`.wav`ファイルとして`exports`フォルダに保存します。
6. すべての処理が完了したら、成功・スキップ・失敗の件数を表示します。

## JSONファイルの構造
スクリプトを実行するには、カレントディレクトリに以下の2つのJSONファイルが必要です。
1. `define.json`(設定ファイル)
APIキーと、使用する話者IDを定義します。`femalevoice`のキー名は固定です。
```
{
  "femalevoice": {
    "apikey": "YOUR_API_KEY_HERE",
    "speakerid": "3",
    "metadata": {}
  }
}
```
`apikey`: tts.quest で取得したご自身のAPIキー。
`speakerid`: VOICEVOXの話者ID（例: "3" = ずんだもん, "74" = 雀松朱司）。

2. voice.json (音声リスト)
生成したい音声の情報を定義します。
トップレベルは辞書（オブジェクト）形式である必要があります。
```
{
  "v1-01": {
    "id": "voice1-01",
    "context": "音声案内を開始します。",
    "wavName": "voice1-01.wav",
    "metadata": {}
  },
  "v1-02": {
    "id": "voice1-02",
    "context": "次の案内です。",
    "wavName": "voice1-02.wav",
    "metadata": {}
  }
}
```
`"v1-01"`: 任意のキー（スクリプトのログ出力で使用されます）。
`context`: **（必須）**音声に変換したいテキスト。
`wavName`: **（必須）**出力するファイル名（.wav 拡張子を含めてください）。

## 使用方法
1. **必要なライブラリのインストール**
このスクリプトは`requests`ライブラリを使用します。ターミナルでインストールしてください。
```pip install requests```
2. **設定ファイルの準備**
`define.json`を作成し、ご自身のAPIキーと使用したい話者IDを記述します。
`voice.json`を作成し、生成したい音声のリストを記述します。
3. **スクリプトの実行**
`generate_voices.py`,`define.json`,`voice.json`が同じディレクトリ（カレントディレクトリ）にあることを確認し、ターミナルで以下を実行します。
```python generate_voices.py```
4. **結果の確認**
実行が完了すると、カレントディレクトリ配下の export フォルダ内に .wav ファイルが生成されています。